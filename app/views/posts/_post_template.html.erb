<div id="<%= dom_id(post) %>" class="post">
    <div class="container">
        <div class="author">
            <%= link_to user_profile_path(user_id: post.user.id), 
                    data: { turbo_action: "advance" } do %>
                <%= render "profiles/profile_image",  profile: post.user.profile %>
                <%= post.user.username %>
            <% end %>
        </div>
        <div class="delete-post">
            <%= render "posts/link_template", post: post %>
        </div>
        <div class="content">
            <% if post.postable_type == "Picture" %>
                <%= image_tag url_for(post.postable.content.variant(resize_to_limit: [500, nil])), alt: post.postable.alt %>
            <% else %>
                <%= post.postable.content %>
            <% end %>
        </div>
        <div class="likes">
            <%= turbo_stream_from "like_#{post.id}" %>
            <%= turbo_frame_tag "like_count_#{post.id}", class: "count" do %>
                <%= render "likes/like_count", post: post %>
            <% end %>
            <%= turbo_frame_tag "new_like_#{post.id}" do %>
                <%= link_to likes_path(post_id: post.id), data: { turbo_method: :post, turbo_stream: true }  do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>heart-outline</title><path d="M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z" /></svg>
                <% end %>
            <% end %>
        </div>
        <%= turbo_stream_from "comments_stream_#{post.id}" %>
        <div class="comments">
            <%= turbo_frame_tag "comments_#{post.id}" do %>
            <% end %>
            <%= turbo_frame_tag "new_comment_#{post.id}", src: new_post_comment_path(post_id: post.id) %>
        </div>
    </div>
</div>
